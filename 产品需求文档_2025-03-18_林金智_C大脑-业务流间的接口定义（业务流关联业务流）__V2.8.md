# 产品需求文档\_2025-03-18\_林金智\_C大脑-业务流间的接口定义（业务流关联业务流）\_\_V2.8

# 相关人员

|  产品  |  UI  |  开发  |  测试  |  交付  |
| --- | --- | --- | --- | --- |
|   $\color{#0089FF}{@林金智}$   |   |   |   |   |

# 会议/变更记录

|  记录日期  |  主要内容  |  记录结论  |  参会人  |  备注  |
| --- | --- | --- | --- | --- |
|   |   |   |   |   |

# 参考文档

|  文档标题  |  作者  |  附件/链接  |
| --- | --- | --- |
|  产品原型  |  林金智  |  [https://mastergo.com/file/154476740049328?fileOpenFrom=project&page\_id=3%3A36539](https://mastergo.com/file/154476740049328?fileOpenFrom=project&page_id=3%3A36539)  |
|  价值流串接问题背景  |  佘靖雯  |  [《价值流串接问题》](https://alidocs.dingtalk.com/i/nodes/y20BglGWO2Gap7ZmhEmxDwkp8A7depqY?utm_scene=person_space)  |
|  执行业务流间的接口定义功能梳理：  |  佘靖雯  |  [《业务流场景梳理、需求分析》](https://alidocs.dingtalk.com/i/nodes/0eMKjyp813MwdagQSYZDjod7VxAZB1Gv?utm_scene=person_space)  |

# 迭代功能

|  迭代功能  |  迭代版本  |  期望上线时间  |  验收报告链接  |
| --- | --- | --- | --- |
|  活动支持配置定制化页面  |  2.8  |  2025年4月15日  |   |

# 需求背景

## 业务流间的接口定义（执行业务流关联执行业务流）

### 需求来源：万物协同

业务流间的接口定义（类似过程平台1.0功能）--【万物协同】

*   **需求拆解：**业务流级配置（外部配置即时生效，不做在模型里面发布），可定义前置、后置业务流，入口：执行业务流管理-操作列【设置】按钮，增加关联其他业务流（添加前后置业务流、对首个活动的sipoc映射、对首个活动的分单合并配置）
    
    *   定义后置业务流时可定义当前业务流某个输出是后置业务流**首个活动**的输入/控制。
        
    *   定义前置业务流时可定义当前业务流**首个活动**可获取的前置业务流的输入/控制
        
*   基于活动视图/复合表单能否流转到外部业务流的判断：当前活动下的O有没有作为另一条业务流首个活动的输入（通过接口定义的输入 + 直接连接的输入）
    
    *   既存在接口定义，又有实际的输入以哪个为准--- 新版本发起外部业务流统一更改为读外部的接口配置，历史数据里面的只能用来上选。
        
*   基于O视图能否流转到外部业务流的判断：当前O没有作为另一条业务流首个活动的接口
    
*   流转到其他业务流时，映射、分单合并配置需要更改为读外部的接口配置
    
*   接口定义的输入在下游活动的输入tab显示问题：外部定义的接口，在业务流内活动上没有实际的输入，定义不到视图表单。但如果刚好外部接口定义的输入，在活动上拖入了，是否会显示出来相应的数据（需和开发确认，理想情况是要显示出来）
    

*   **功能目标和价值**：实现数据在线、万物互联
    

1.  有效减少因版本迭代带来的成本和时间消耗
    
2.  需要将多个业务流程串联成端到端流程时
    
3.  上下游业务流程需要数据交互和传递时
    
4.  构建复杂业务场景，实现跨业务流程的协同工作
    

*   **未来扩展能力：略**
    

# 用户调研及结论

## 用户分析

*   主要⽤⼾：使用C大脑业务流应用的业务人员、领导层
    
*   次要⽤⼾：拖拉拽人
    
*   关键⽤⼾：公司领导
    
*   负⾯⽤⼾：黑客、故意不按实际业务场景随意配置规则导致流程阻塞的人
    
*   接受服务的⽤⼾：使⽤C大脑2.0各类执行APP的 ⽤⼾
    
*   不能直接理解的⽤⼾模型描述：无
    

# 产品方案

## 业务流间的接口定义（执行业务流关联执行业务流）

### 示意图

flowchart TD     A\[执行业务流管理\] --> B\[操作列-设置按钮\]     B --> C\[关联其他业务流页签\]          C --> D\[添加前置业务流\]     C --> E\[添加后置业务流\]          %% 前置业务流配置流程     D --> D1\[显示已发布版本的执行业务流列表\]     D1 --> D2\[选择执行业务流\]     D2 --> D3\[选择前置业务流的数据对象\n对本业务流首个活动的IOC节点映射\]     D3 --> D4\[配置分单合并配置\]     D4 --> D5\[点击确定\]     D5 --> D6\[保存配置\]          %% 后置业务流配置流程     E --> E1\[显示已发布版本的执行业务流列表\]     E1 --> E2\[选择执行业务流\]     E2 --> E3\[选择本业务流的数据对象\n对后置业务流首个活动的IOC节点映射\]     E3 --> E4\[配置分单合并配置\]     E4 --> E5\[点击确定\]     E5 --> E6\[保存配置\]          %% 样式设置     classDef mainProcess fill:#f9f,stroke:#333,stroke-width:2px;     classDef subProcess fill:#bbf,stroke:#333,stroke-width:1px;     classDef action fill:#dfd,stroke:#333;          class A,B,C mainProcess;     class D,E subProcess;     class D1,D2,D3,D4,D5,D6,E1,E2,E3,E4,E5,E6 action;

### 方案设计-原型及详细说明

|  模块  |  功能  |  功能描述/操作说明  |
| --- | --- | --- |
|  配置侧  |  业务流间的接口定义  |  **基本配置入口** *   执行业务流管理-操作列【设置】按钮，增加关联其他业务流页签      *   权限要求：需要业务流配置权限（自己的执行业务流）      *   页签下包括两类：添加前置执行业务流和添加后置执行业务流      *   每类业务流区域显示已关联业务流数量统计      **添加前置执行业务流** *   点击"添加前置执行业务流"按钮-底部抽屉弹窗      *   弹窗标题为"添加前置执行业务流"          *   弹窗包含搜索框，支持模糊搜索          *   显示已发布的执行业务流列表，分页展示          *   此列表与执行业务流管理列表一致（已发布状态）              *   列表展示字段：业务流名称、归属过程框架、执行业务流版本号、备注、所有者（工号）、更新时间等          *   单选，选择一条已发布的执行业务流      *   点击下一步配置SIPOC映射          *   展示前置执行业务流图和当前执行业务流图                  *   支持全屏查看                      *   接口类型：默认为作为输入                          *   作为输入：所选数据对象作为当前执行业务流首个活动的I（O转I）                               *   作为方案：所选数据对象作为当前执行业务流首个活动的方案C（O转C）                      *   SIPOC映射配置                  *   选择前置业务流的某个数据对象（O和O的一度）对本业务流首个活动的O和O的一度的SIPOC映射（必配）                      *   来源数据对象为前置业务流的O和O的一度，目标数据对象为本业务流首个活动O和O的一度                      *   目标数据对象范围：当前执行业务流的首个活动的O及其一度关联数据对象                 目标数据对象属性：选择的数据对象的属性     来源数据对象范围：前置执行业务流的 O及其一度关联数据对象    来源数据对象属性：选择的数据对象的属性 *   当前业务流首个活动为子过程的情况： 目标数据对象范围：下钻到子过程节点首个活动的O及其一度关联数据对象        来源数据对象范围：前置执行业务流的O及其一度关联数据对象      *   数据范围配置（来源数据对象和目标数据对象下拉和SIPOC一致）      *   点击下一步配置分单合并配置（默认为一对一配置）      *   支持调整配置      *   子数据对象合并类型 分组合并依据属性：显示SIPOC映射里所选前置业务流的数据对象的一度关联数据对象；若没有则显示暂无数据   分单策略：      *   分组合并依据属性：展示SIPOC映射里所选前置业务流的数据对象和其一度关联数据对象       *   子过程节点一致      *   点击确定时进行配置完整性校验，必填项未填写时给出错误提示      *   错误提示：          *   红框红字提示              *   提示文案：URL格式错误，请重新输入！          *   点击确定-保存配置          *   前置业务流下列表回显执行业务流名称，其后可删除可再次配置                  *   删除确认弹窗                          *   文案：您确定要删除本业务流与"业务流AAAA"的关联关系吗？ ⚠️ 删除后将导致： • SIPOC映射、分单合并等配置将被被清除 • 业务流间数据传递将中断 此操作不可撤销，请谨慎操作！                      *   提供"配置"按钮，可快速查看已配置的映射关系，同时支持修改配置          *   再次添加          *   已选前置业务流自动过滤，不可重复选择          **添加后置执行业务流** *   点击"添加后置执行业务流"按钮-底部抽屉弹窗      *   弹窗标题为"添加后置执行业务流"          *   弹窗包含搜索框，支持模糊搜索          *   显示已发布的执行业务流列表，分页展示          *   此列表与执行业务流管理列表一致（已发布状态）              *   列表展示字段：业务流名称、归属过程框架、执行业务流版本号、备注、所有者（工号）、更新时间等          *   选择一条已发布的执行业务流      *   点击下一步配置SIPOC映射          *   展示当前执行业务流图和后置执行业务流图                  *   支持全屏查看                  *   接口类型：默认为作为输入                  *   作为输入：所选数据对象作为后置执行业务流首个活动的I（O转I）                       *   作为方案：所选数据对象作为后置执行业务流首个活动的方案C（O转C）                  *   SIPOC映射配置                  *   选择本业务流的某个数据对象（O）对后置业务流首个活动的IOC节点的OSIPOC映射（必配）                      *   来源数据对象为本业务流的O，目标数据为后置业务流首个活动O                      *   后置业务流首个活动为子过程的情况： 目标数据对象范围：下钻到子过程节点首个活动的O及其一度关联数据对象                  来源数据对象范围：当前执行业务流的O及其一度关联数据对象 *   数据范围配置（来源数据对象和目标数据对象下拉和SIPOC一致）      *   点击下一步配置分单合并配置（默认为一对一配置）      *   支持调整配置      *   子数据对象合并类型 分组合并依据属性：显示SIPOC映射里所选当前业务流的数据对象的一度关联数据对象；若没有则显示暂无数据   分单策略：      *   分组合并依据属性：展示SIPOC映射里所选当前业务流的数据对象和其一度关联数据对象       *   点击确定时进行配置完整性校验，必填项未填写时给出错误提示      *   错误提示：          *   红框红字提示              *   提示文案：URL格式错误，请重新输入！          *   点击确定-保存配置删除和修改          *   后置业务流下列表回显执行业务流名称，其后可删除可再次配置              *   提供"配置"按钮，可快速查看已配置的映射关系，同时支持修改配置          *   再次添加          *   已选后置业务流自动过滤，不可重复选择          **保存与生效** *   页面底部提供"保存"按钮，保存整体配置      *   保存时进行整体配置检查      *   明确说明配置生效时机：是立即生效          *   提示：配置成功！           |
|  执行侧  |  业务流间的接口定义  |  *   基于活动视图/复合表单能否流转到外部业务流的判断：当前活动下的O有没有作为另一条业务流首个活动的输入（通过接口定义的输入 + 直接连接的输入）          *   既存在接口定义，又有实际的输入以哪个为准--- 新版本发起外部业务流统一更改为读外部的接口配置，历史数据里面的只能用来上选。          *   基于O视图能否流转到外部业务流的判断：当前O没有作为另一条业务流首个活动的接口      *   流转到其他业务流时，映射、分单合并配置需要更改为读外部的接口配置      *   输入/方案查看和上选          *   接口定义的输入在下游活动的输入tab显示问题：外部定义的接口，在业务流内活动上没有实际的输入，定义不到视图表单。但如果刚好外部接口定义的输入，在活动上拖入了，是否会显示出来相应的数据（需和开发确认，理想情况是要显示出来）           |

# 非功能性需求

###  数据/权限需求

  _不同数据对于不同角色用户 增删改查的权限分别是什么样的_

### 安全需求

  _部分数据是否需要加密，对于身份证、手机、姓名、地址等字段做星号处理等_

  _账号密码在系统中不能被查询_

  _在不同系统通过外网传送数据时，需要约定一定的加解密的方案，以保证数据在网络中传输不被泄露_

### 性能需求

|  **页面/**  |  **并发数（同时请求系统次数）**  |  **响应时间**  |
| --- | --- | --- |
|   |   |   |
|   |   |   |

### 版本兼容需求

  _是否有历史版本，若有历史数据，之前版本的数据如何处理，页面展示等_

### 埋点需求

  _对于页面中关键按钮可以考虑加入埋点，获知用户的点击/使用情况，对于后续通过用户行为来做页面改版有好处_

_若有多个大功能，则按照3的格式，写4、5。。。。。_

### 耗时和异常case处理方案

### 涉及到的端

|  Android  |  ✅  |
| --- | --- |
|  IOS  |  ❌  |
|  Web  |  ✅  |
|  PC  |  ❌  |
|  iPad  |  ❌  |
|  服务端  |  ❌  |

## 系统技术要求

系统采用本地部署方式，系统建设应遵循稳定性、可扩展性、高性能、高可用性、可维护性等相结合的原则。

**1.可扩展性**

（1）系统结构应具备开放性（主要组件和技术采用开源技术），可实现与其他系统的功能集成、数据交换与共享，应提供开放的应用接口功能，支持与第三方工具的功能集成，支持第三方数据接入。其中基础框架、前端技术框架、流程引擎、全文搜索引擎、报表工具五项组件需要采用开源技术。

（2）根据行内业务发展需要，系统应具备灵活地、动态地扩展设备容量以提升系统性能；应具备技术升级、设备更新的灵活性；应具备支持业务功能的扩展、调整的灵活性。

**2.高性能**

（1）登陆、录入、修改、删除、保存等单一操作，系统响应时间在3秒之内 。

（2）基于数据库的目录检索： 查询响应时间在3秒之内。

（3）基于全文检索引擎的检索：响应速度在5秒之内。

（4）支持各类操作高峰期并发>20人，系统同时在线人数>200人。

（5）系统提供7X24小时的连续运行，平均年故障时间：<1天，数据库平均恢复时间小于1小时；系统故障在2小时内响应并且系统平均恢复时间小于4小时。

**3.易用性**

（1）系统基于B/S（Browser/Server）架构。除了浏览器之外不需要安装任何软件或插件。

（2）客户端的使用要求能够支持目前通用的各类操作系统环境，包括Windows、MAC OS操作系统。对客户端浏览器的使用要求能够支持目前主流浏览器，包括Edge浏览器、IE浏览器（IE8及以上）、360浏览器、谷歌浏览器、火狐浏览器。

（3）系统支持Word、Excel、PPT、PDF等多种主流电子文件进行管理，包括电子文件的挂接、导出、下载、打印以及支持对客户端零要求的文件浏览。

（4）系统应采用组件式开发，对于需求的新加与变更可以通过配置等手段快速响应，而不需要大量的开发。

（5）系统支持Linux或Windows Services服务器操作系统，支持Oracle/SQL Server/MySQL主流数据库中一种，各个系统及子系统独立运行、互不影响。

（6）用户操作界面友好，且在业务操作中，系统拥有丰富的提示信息，使用户可快速、轻易了解系统的操作流程。同时，系统还应提供联机帮助信息，全面指导用户的业务操作。

（7）系统支持通过配置完成个性化报表制作及相关简单功能（如查询）的拓展开发和相关功能的维护。

（8）系统支持通过设置权限体系管理用户权限，确保不同的用户组对不同的数据集的增/删/改/查权限。

**4.稳定性**

（1）档案信息管理系统为业务支撑系统，须确保7×24连续平稳运行，以保证业务不间断运行。

（2）提供切实可靠的数据、文件备份机制，支持增量备份、全备份。

**5.高可用性**

（1）采用微服务架构，支持容器化部署，采用对象存储；

（2）要求支持负载均衡，即系统可以部署在多个节点上，各个节点在功能上是等价的，负载被均衡的分发到各个节点上，部分节点失效，不影响集群的对外服务。

**6.可维护性**

系统的可维护性将决定系统的运行成本，应具备系统的运行监控平台，提供方便灵活的管理手段和工具。

## 系统集成要求

需具备较强的与外部系统对接的能力，可以实现通过以下方式进行集成：针对数据交换的输入/输出工具；直接共享数据库内容（如通过数据视图，触发器，存储过程等）；基于WEB SERVICES或者APIs等行业标准。